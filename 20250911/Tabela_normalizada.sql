CREATE TABLE FORNECEDOR(
    ID_FORNECEDOR NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100)NOT NULL,
    ENDERECO VARCHAR2(100)NOT NULL,
    EMAIL VARCHAR2(100)NOT NULL,
    TELEFONE VARCHAR2(20)NOT NULL
);

CREATE TABLE MATERIA_PRIMA(
    ID_MATERIA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100)NOT NULL,
    TIPO VARCHAR2(100)NOT NULL,
    UNIDADE_MEDIDA VARCHAR2(100)NOT NULL,
    PRECO_UNITARIO NUMBER(10,2)NOT NULL,
    ID_FORNECEDOR NUMBER(10)NOT NULL,
    FOREIGN KEY (ID_FORNECEDOR) REFERENCES FORNECEDOR(ID_FORNECEDOR)
);

CREATE TABLE RECEITA_TECNICA(
    ID_RECEITA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TIPO_CONCRETO VARCHAR2(100)
);

CREATE TABLE RECEITA_MATERIA(
    ID_RECEITA NUMBER(10)NOT NULL,
    ID_MATERIA NUMBER(10)NOT NULL,
    FOREIGN KEY (ID_RECEITA) REFERENCES RECEITA_TECNICA(ID_RECEITA),
    FOREIGN KEY (ID_MATERIA) REFERENCES MATERIA_PRIMA(ID_MATERIA),
    PRIMARY KEY (ID_RECEITA, ID_MATERIA),
    QUANTIDADE VARCHAR2(100)NOT NULL,
    UNIDADE CHAR(1)NOT NULL CHECK (UNIDADE IN('K', 'L', 'M'))
);

CREATE TABLE LOTES_DE_PRODUCAO(
    ID_LOTE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DATA_PRODUCAO DATE NOT NULL,
    QUANTIDADE_TONELADAS NUMBER(10,2)NOT NULL,
    STATUS VARCHAR2(20)NOT NULL CHECK(STATUS IN('CONFIRMADO', 'CANCELADO', 'PENDENTE', 'EM PROCESSO')),
    ID_RECEITA NUMBER(10)NOT NULL,
    ID_FUNCIONARIO NUMBER(10)NOT NULL,
    ID_CLIENTE NUMBER(10)NOT NULL,
    ID_VEICULO NUMBER(10)NOT NULL,
    FOREIGN KEY (ID_RECEITA) REFERENCES RECEITA_TECNICA(ID_RECEITA),
    FOREIGN KEY (ID_FUNCIONARIO) REFERENCES FUNCIONARIO(ID_FUNCIONARIO),
    FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE),
    FOREIGN KEY (ID_VEICULO) REFERENCES VEICULO(ID_VEICULO)
);

CREATE TABLE FUNCIONARIO(
    ID_FUNCIONARIO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100)NOT NULL,
    CPF CHAR(11) UNIQUE,
    CARGO VARCHAR2(100)
);

CREATE TABLE CLIENTE(
    ID_CLIENTE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100)NOT NULL,
    CNPJ CHAR(14)UNIQUE,
    EMAIL VARCHAR2(100)NOT NULL,
    ENDERECO VARCHAR2(100)NOT NULL,
    TELEFONE VARCHAR2(100)NOT NULL
);

CREATE TABLE VEICULO(
    ID_VEICULO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PLACA VARCHAR2(13)NOT NULL,
    CAPACIDADE_TONELADAS NUMBER(10,2)NOT NULL
);

CREATE TABLE LOTE_VEICULO(
    ID_LOTE NUMBER(10)NOT NULL,
    ID_VEICULO NUMBER(10)NOT NULL,
    FOREIGN KEY (ID_LOTE) REFERENCES LOTES_DE_PRODUCAO(ID_LOTE),
    FOREIGN KEY (ID_VEICULO) REFERENCES VEICULO(ID_VEICULO),
    PRIMARY KEY (ID_LOTE, ID_VEICULO),
    STATUS VARCHAR2(20)NOT NULL CHECK(STATUS IN('EM PRODUCAO', 'FINALIZADO', 'CONFIRMADO', 'CANCELADO'))
);